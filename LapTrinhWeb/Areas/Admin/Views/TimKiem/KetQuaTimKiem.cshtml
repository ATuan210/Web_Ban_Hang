@model PagedList.IPagedList<LapTrinhWeb.Models.Product>
@using PagedList.Mvc;
@using PagedList;
@using LapTrinhWeb.Models;

@{
    ViewBag.Title = "KetQuaTimKiem";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

@if (ViewBag.ThongBao != null)
{
    <div class="alert alert-warning">@ViewBag.ThongBao</div>
}

<style>
    /* Container phân trang */
    .pagination {
        display: flex;
        justify-content: center;
        list-style: none;
        padding: 0;
        margin: 20px 0;
        gap: 5px;
    }

        /* Mỗi item trang */
        .pagination li {
            display: inline-block;
        }

            /* Link và số trang */
            .pagination li a,
            .pagination li span {
                display: block;
                padding: 8px 14px;
                border-radius: 6px;
                text-decoration: none;
                color: #555;
                font-weight: 500;
                border: 1px solid #ddd;
                transition: all 0.2s;
                min-width: 36px;
                text-align: center;
            }

                /* Hover */
                .pagination li a:hover {
                    background-color: #007bff;
                    color: #fff;
                    border-color: #007bff;
                }

            /* Trang đang active */
            .pagination li.active span {
                background-color: #007bff;
                color: #fff;
                font-weight: bold;
                border-color: #007bff;
                cursor: default;
            }

            /* Disabled (prev/next khi không có) */
            .pagination li.disabled span {
                color: #ccc;
                border-color: #ddd;
                cursor: not-allowed;
            }

            /* Shadow nhẹ cho đẹp */
            .pagination li a,
            .pagination li span {
                box-shadow: 0 2px 5px rgba(0,0,0,0.08);
            }

                /* Optional: prev/next icon */
                .pagination li a.prev,
                .pagination li a.next {
                    font-weight: bold;
                }

</style>

<div style="text-align: center; margin: 20px auto; font-weight: bolder; width: 70%; align-content: center; font-size: 22px; border-radius: 10px; background-color: #ADADAD;">Kết Quả Tìm Kiếm <i class="fa-solid fa-magnifying-glass fa-beat"></i></div>

<table class="table table-bordered">
    <tr style="text-align: center;">
        <th style="border: 1px solid #000;">ID</th>
        <th style="border: 1px solid #000;">Sản Phẩm</th>
        <th style="border: 1px solid #000;">Hình Ảnh</th>
        <th style="border: 1px solid #000;">Giá</th>
        <th style="border: 1px solid #000;">Giống</th>
        <th style="border: 1px solid #000;">Màu Sắc</th>
        <th style="border: 1px solid #000;">Giới Tính</th>
        <th style="border: 1px solid #000;">Số Lượng</th>
        <th style="border: 1px solid #000;">Danh Mục</th>
        <th style="border: 1px solid #000;"><i class="fa-solid fa-pen-to-square fa-bounce"></i></th>
        <th style="border: 1px solid #000;"><i class="fa-solid fa-circle-info fa-bounce"></i></th>
        <th style="border: 1px solid #000;"><i class="fa-solid fa-trash fa-bounce"></i></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr style="border: 1px solid #000; text-align: center;">
            <td style="border: 1px solid #000;">
                @Html.DisplayFor(modelItem => item.ProId)
            </td>
            <td style="border: 1px solid #000;">
                @Html.DisplayFor(modelItem => item.ProName)
            </td>
            <td style="border: 1px solid #000;">
                <img src="@Url.Content("~/img/pet/" + item.ProImage)" alt="Product Image" style="width:100px; height:100px; object-fit:cover;" />
            </td>
            <td style="border: 1px solid #000;">
                @String.Format("{0:N0} đ", item.ProPrice)
            </td>
            <td style="border: 1px solid #000;">
                @Html.DisplayFor(modelItem => item.ProBreed)
            </td>
            <td style="border: 1px solid #000;">
                @Html.DisplayFor(modelItem => item.ProColor)
            </td>
            <td style="border: 1px solid #000;">
                @Html.DisplayFor(modelItem => item.ProGender)
            </td>
            <td style="border: 1px solid #000;">
                @Html.DisplayFor(modelItem => item.Quantity)
            </td>
            <td style="border: 1px solid #000;">
                @Html.DisplayFor(modelItem => item.Category.CatName)
            </td>
            <td style="border: 1px solid #000;">
                @Html.ActionLink("Edit", "Edit", new { id = item.ProId }, new { @class = "btn btn-sm btn-warning" })
            </td>
            <td style="border: 1px solid #000;">
                @Html.ActionLink("Details", "Details", new { id = item.ProId }, new { @class = "btn btn-sm btn-info" })
            </td>
            <td style="border: 1px solid #000;">
                @if (User.IsInRole("Admin"))
                {
                    @Html.ActionLink("Delete", "Delete", new { id = item.ProId }, new { @class = "btn btn-sm btn-danger" })
                }
            </td>
        </tr>
    }
</table>

<div style="margin-top: 20px;">
    <a href="@Url.Action("Index", "Products")"
       style="text-decoration: none; font-weight: bold; font-size: 16px; display: inline-flex; align-items: center; margin-right: 220px; color: #000;">
        <i class="fa-solid fa-backward" style="margin-right: 8px;"></i> Quay lại ADMIN PAGE
    </a>
</div>

<div style="text-align:center; margin-top:20px;">
    @Html.PagedListPager(
        Model,
        page => Url.Action("KetQuaTimKiem", new { page, txtTimKiem = Request["txtTimKiem"] }),
        new PagedListRenderOptions { Display = PagedListDisplayMode.IfNeeded }
    )
</div>


